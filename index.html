<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <title>Pryv Access Token Generation</title>
    <link rel="icon" href="img/logoPryv.png">
    <link href="css/style.css" rel="stylesheet" type="text/css"/>
    <script src="script.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="pryv.js"></script>
</head>
<body>

<div class="title">
    <h1>Pryv Access Token Generation</h1>
</div>

<div class="container">
    <div class="boxDiv">
        <h2>How to</h2>
        <ol>
            <li>Enter the <u>Application ID</u> that you will use in your app</li>
            <li>Setup the streams you will request access to in the <u>Permissions Box</u></li>
            <li>Press the <u>Request Access</u> button</li>
            <li><u>Sign in</u> with your username and password</li>
            <li>Authorize the Application access to your account</li>
            <li>Copy the Access token and use it to run your tests</li>
        </ol>
    </div>

    <div class="boxDiv">
        <h3>Permissions</h3>
        This defines the streams that your access token will be allowed to manipulate.<br>
        If you request permissions for streams that don't yet exist, they will be created on the user's account upon user authorization.<br><br>
        If the <u>Mater Token</u> option is checked, it will set the level <u>manage</u> on all streams for the selected app, or you can chose to manage permissions manually :
        <ul>
            <li><u>Basic:</u> Fill up the fields <u>streamId</u>, <u>level</u> and <u>defaultName</u>(optional) and click the Submit button.</li>
            <li><u>Advanced:</u> Enter a JSON array where each item contains the fields <u>streamId</u>, <u>level</u> and <u>defaultName</u>(optional).</li>
        </ul>

        <h4>The <u>level</u> must be one of the following values:<br></h4>
        <ul>
            <li><u>read</u>: Allows to get the stream's values.</li>
            <li><u>contribute</u>: Read and generate new content.</li>
            <li><u>manage</u>: Contribute, update and delete.</li>
        </ul>
    </div>
    <table>
        <tr>
            <td class="leftColumn"><p><u>Register URL</u></p></td>
            <td class="rightColumn"><p id="registerUrlText"></p></td>
        </tr>
        <tr>
            <td class="leftColumn"><p><u>Application ID</u> (min length: 6)</p></td>
            <td class="rightColumn"><input id='requestingAppId' type='text' placeholder='Insert your Application ID'/></td>
        </tr>
        <tr>
            <td class="leftColumn">
                <p><u>Permissions</u></p>
                <div class="checkboxDiv">
                    <input type="checkbox" name="masterToken" id="masterToken">
                    <label for="masterToken">Master Token</label>
                </div>
            </td>
            <td class="rightColumn">
                <div id="permissionsViewInactive"></div>
                <div id="permissionsViewActive">
                    <div class="addStreamDiv">
                        <input id='streamId' type='text' placeholder='StreamId'/><br>
                        <select id="level">
                            <option value="read">Read</option>
                            <option value="contribute">Contribute</option>
                            <option value="manage">Manage</option>
                        </select><br>
                        <input id='name' type='text' placeholder='Name (optional)'/><br>
                        <input id='submitPermission' type="button" value="Submit">
                    </div>
                    <div class="streamListDiv">
                        <textarea id='permissionsArea'></textarea>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <input id='submitButton' type='submit' onClick='requestAccess() ; return false;' value='Request Access'>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <div id="pryvButtonHolder">
                    <span id='pryvButton'></span>
                </div>
            </td>
        </tr>
        <tr>
            <td class="leftColumn"><p><u>Username</u></p></td>
            <td class="rightColumn"><p id="usernameArea"></p></td>
        </tr>
        <tr>
            <td class="leftColumn"><p><u>Access token</u></p></td>
            <td class="rightColumn"><p id="tokenArea"></p></td>
        </tr>
    </table>
    <div class="consoleDiv">
        <h3>Console</h3>
        <textarea id="console" cols="150" rows="10"></textarea>
    </div>
</div>
</body>
</html>